{"version":3,"sources":["../js/popupsLayer.js"],"names":["popupsLayer","layer","title","content","DEFAULT_CONFIG","position","style","background","borderRadius","maxWidth","enable","draggable","btnGroup","close","color","fontSize","borderBottom","config","Object","assign","document","createElement","classList","add","createLayer","createTitle","createContent","body","insertBefore","firstChild","_CONFIG_","_POSITION_","setAttribute","entries","key","value","appendChild","text","innerText","template","temp","innerHTML","i","cursor","textBox","icon","img","src","cssFloat","toLowerCase","p","btn","fn","addEventListener","theme","e","preventDefault","removeChild"],"mappings":"AAAA;AAEA;;;;;;;;AAQA;;;;;;;;;;;;;;;;;;;;IAMMA,W;;;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA,6BAAqC;AAAA,QAAxBC,KAAwB,QAAxBA,KAAwB;AAAA,QAAjBC,KAAiB,QAAjBA,KAAiB;AAAA,QAAVC,OAAU,QAAVA,OAAU;;AAAA;;AACjC;AACA,QAAMC,cAAc,GAAG;AACnBH,MAAAA,KAAK,EAAE;AACHI,QAAAA,QAAQ,EAAE,QADP;AAEHC,QAAAA,KAAK,EAAE;AACHC,UAAAA,UAAU,EAAE,SADT;AAEHC,UAAAA,YAAY,EAAE,KAFX;AAGHC,UAAAA,QAAQ,EAAE;AAHP;AAFJ,OADY;AASnBP,MAAAA,KAAK,EAAE;AACHQ,QAAAA,MAAM,EAAE,IADL;AAEHC,QAAAA,SAAS,EAAE,IAFR;AAGHC,QAAAA,QAAQ,EAAE;AACNF,UAAAA,MAAM,EAAE,IADF;AAENG,UAAAA,KAAK,EAAE;AAFD,SAHP;AAOHP,QAAAA,KAAK,EAAE;AACHQ,UAAAA,KAAK,EAAE,SADJ;AAEHC,UAAAA,QAAQ,EAAE,MAFP;AAGHC,UAAAA,YAAY,EAAE;AAHX;AAPJ,OATY;AAsBnBb,MAAAA,OAAO,EAAE;AACLG,QAAAA,KAAK,EAAE;AACHQ,UAAAA,KAAK,EAAE,SADJ;AAEHC,UAAAA,QAAQ,EAAE;AAFP;AADF;AAtBU,KAAvB;AA8BA,SAAKE,MAAL,GAAc,EAAd;AACA,SAAKA,MAAL,CAAYhB,KAAZ,GAAoBiB,MAAM,CAACC,MAAP,CAAcf,cAAc,CAACH,KAA7B,EAAoCA,KAApC,CAApB;AACA,SAAKgB,MAAL,CAAYf,KAAZ,GAAoBgB,MAAM,CAACC,MAAP,CAAcf,cAAc,CAACF,KAA7B,EAAoCA,KAApC,CAApB;AACA,SAAKe,MAAL,CAAYd,OAAZ,GAAsBe,MAAM,CAACC,MAAP,CAAcf,cAAc,CAACD,OAA7B,EAAsCA,OAAtC,CAAtB;AAEA,SAAKH,WAAL,GAAmBoB,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAnB;AACA,SAAKrB,WAAL,CAAiBsB,SAAjB,CAA2BC,GAA3B,CAA+B,cAA/B;AAEA,SAAKC,WAAL;AACA,QAAI,KAAKP,MAAL,CAAYf,KAAZ,CAAkBQ,MAAtB,EACI,KAAKe,WAAL;AACJ,SAAKC,aAAL;AACAN,IAAAA,QAAQ,CAACO,IAAT,CAAcC,YAAd,CAA2B,KAAK5B,WAAhC,EAA6CoB,QAAQ,CAACO,IAAT,CAAcE,UAA3D;AACH;;;;kCAEa;AACV,UAAMC,QAAQ,GAAG,KAAKb,MAAL,CAAYhB,KAA7B;AACA,UAAM8B,UAAU,GAAG;AACf,gBAAQ,SADO;AAEf,iBAAS,UAFM;AAGf,kBAAU,WAHK;AAIf,kBAAU;AAJK,OAAnB;AAOA,WAAK9B,KAAL,GAAamB,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAb;AACA,WAAKpB,KAAL,CAAWqB,SAAX,CAAqBC,GAArB,CAAyB,kBAAzB;AACA,WAAKtB,KAAL,CAAW+B,YAAX,CAAwB,OAAxB,YAAoCD,UAAU,CAACD,QAAQ,CAACzB,QAAV,CAA9C;;AAXU,iBAYea,MAAM,CAACe,OAAP,CAAeH,QAAQ,CAACxB,KAAxB,CAZf;;AAYV,+CAAyD;AAAA;AAAA,YAA/C4B,GAA+C;AAAA,YAA1CC,KAA0C;;AACrD,aAAKlC,KAAL,CAAWK,KAAX,CAAiB4B,GAAjB,IAAwBC,KAAxB;AACH;;AACD,WAAKnC,WAAL,CAAiBoC,WAAjB,CAA6B,KAAKnC,KAAlC;AACH;;;kCAEa;AACV,UAAM6B,QAAQ,GAAG,KAAKb,MAAL,CAAYf,KAA7B;AACA,UAAIA,KAAK,GAAGkB,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAZ;AACAnB,MAAAA,KAAK,CAACoB,SAAN,CAAgBC,GAAhB,CAAoB,oBAApB;;AAHU,kBAIeL,MAAM,CAACe,OAAP,CAAeH,QAAQ,CAACxB,KAAxB,CAJf;;AAIV,mDAAyD;AAAA;AAAA,YAA/C4B,GAA+C;AAAA,YAA1CC,KAA0C;;AACrDjC,QAAAA,KAAK,CAACI,KAAN,CAAY4B,GAAZ,IAAmBC,KAAnB;AACH;;AACD,UAAIL,QAAQ,CAACO,IAAb,EACInC,KAAK,CAACoC,SAAN,GAAkBR,QAAQ,CAACO,IAA3B;;AACJ,UAAIP,QAAQ,CAACS,QAAb,EAAuB;AACnB,YAAIC,IAAI,GAAGtC,KAAK,CAACuC,SAAjB;AACAvC,QAAAA,KAAK,CAACuC,SAAN,GAAkBD,IAAI,GAAGV,QAAQ,CAACS,QAAlC;AACH;;AACD,UAAIT,QAAQ,CAAClB,QAAT,CAAkBF,MAAtB,EAA8B;AAAA,oBACDQ,MAAM,CAACe,OAAP,CAAeH,QAAQ,CAACxB,KAAxB,CADC;;AAC1B,qDAAyD;AAAA;AAAA,cAA/C4B,GAA+C;AAAA,cAA1CC,KAA0C;;AACrD;AACA,cAAIA,KAAJ,EAAW;AACP,gBAAIO,CAAC,GAAGtB,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAR;AACAqB,YAAAA,CAAC,CAACpB,SAAF,CAAYC,GAAZ,CAAgBW,GAAhB;AACH;AACJ;AACJ;;AACD,UAAIJ,QAAQ,CAACnB,SAAb,EAAwB;AACpBT,QAAAA,KAAK,CAACI,KAAN,CAAYqC,MAAZ,GAAqB,YAArB,CADoB,CAEpB;AACH;;AACD,WAAK1C,KAAL,CAAWmC,WAAX,CAAuBlC,KAAvB;AACH;;;oCAEe;AACZ,UAAM4B,QAAQ,GAAG,KAAKb,MAAL,CAAYd,OAA7B;AACA,UAAIA,OAAO,GAAGiB,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAd;AACAlB,MAAAA,OAAO,CAACmB,SAAR,CAAkBC,GAAlB,CAAsB,sBAAtB;;AAHY,kBAIaL,MAAM,CAACe,OAAP,CAAeH,QAAQ,CAACxB,KAAxB,CAJb;;AAIZ,mDAAyD;AAAA;AAAA,YAA/C4B,GAA+C;AAAA,YAA1CC,KAA0C;;AACrDhC,QAAAA,OAAO,CAACG,KAAR,CAAc4B,GAAd,IAAqBC,KAArB;AACH;;AACD,UAAIS,OAAO,GAAGxB,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAd;AACAuB,MAAAA,OAAO,CAACtB,SAAR,CAAkBC,GAAlB,CAAsB,mBAAtB;;AACA,UAAIO,QAAQ,CAACe,IAAb,EAAmB;AACf,YAAIC,GAAG,GAAG1B,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAV;AACAyB,QAAAA,GAAG,CAACC,GAAJ,GAAUjB,QAAQ,CAACe,IAAT,CAAcE,GAAxB;AACAD,QAAAA,GAAG,CAACxC,KAAJ,CAAU0C,QAAV,GAAqBlB,QAAQ,CAACe,IAAT,CAAcxC,QAAd,CAAuB4C,WAAvB,EAArB;AACAL,QAAAA,OAAO,CAACR,WAAR,CAAoBU,GAApB;AACH;;AACD,UAAIhB,QAAQ,CAACO,IAAb,EAAmB;AACf,YAAIa,CAAC,GAAG9B,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAR;AACA6B,QAAAA,CAAC,CAACZ,SAAF,GAAcR,QAAQ,CAACO,IAAvB;AACAO,QAAAA,OAAO,CAACR,WAAR,CAAoBc,CAApB;AACH;;AACD,UAAIpB,QAAQ,CAACS,QAAb,EAAuB;AACnB,YAAIC,IAAI,GAAGI,OAAO,CAACH,SAAnB;AACAG,QAAAA,OAAO,CAACH,SAAR,GAAoBD,IAAI,GAAGV,QAAQ,CAACS,QAApC;AACH;;AACDpC,MAAAA,OAAO,CAACiC,WAAR,CAAoBQ,OAApB;;AACA,UAAId,QAAQ,CAAClB,QAAb,EAAuB;AACnB,YAAIA,QAAQ,GAAGQ,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAf;AACAT,QAAAA,QAAQ,CAACU,SAAT,CAAmBC,GAAnB,CAAuB,SAAvB;;AAFmB,oBAGML,MAAM,CAACe,OAAP,CAAeH,QAAQ,CAAClB,QAAxB,CAHN;;AAGnB,qDAA4D;AAAA;AAAA,cAAlDsB,GAAkD;AAAA,cAA7CC,KAA6C;;AACxD,cAAIgB,GAAG,GAAG/B,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAV;AACA8B,UAAAA,GAAG,CAAC7B,SAAJ,CAAcC,GAAd,CAAkB,KAAlB;AACA4B,UAAAA,GAAG,CAACnB,YAAJ,CAAiB,IAAjB,EAAuBE,GAAvB;;AACA,cAAIC,KAAK,CAACE,IAAV,EAAgB;AACZc,YAAAA,GAAG,CAACb,SAAJ,GAAgBH,KAAK,CAACE,IAAtB;AACH;;AACD,cAAIF,KAAK,CAACiB,EAAV,EAAc;AACVD,YAAAA,GAAG,CAACE,gBAAJ,CAAqB,OAArB,EAA8BlB,KAAK,CAACiB,EAApC;AACH;;AACD,cAAIjB,KAAK,CAACmB,KAAV,EAAiB;AACbH,YAAAA,GAAG,CAAC7B,SAAJ,CAAcC,GAAd,CAAkBY,KAAK,CAACmB,KAAxB;AACH;;AACD1C,UAAAA,QAAQ,CAACwB,WAAT,CAAqBe,GAArB;AACH;;AACDhD,QAAAA,OAAO,CAACiC,WAAR,CAAoBxB,QAApB;AACH;;AACD,WAAKX,KAAL,CAAWmC,WAAX,CAAuBjC,OAAvB;AACH;;;8BAESoD,C,EAAG;AACTA,MAAAA,CAAC,CAACC,cAAF;AACH;;;4BAEO;AACJpC,MAAAA,QAAQ,CAACO,IAAT,CAAc8B,WAAd,CAA0B,KAAKzD,WAA/B;AACH","sourcesContent":["'use strict';\r\n\r\n/**\r\n * 弹出层组件.\r\n *\r\n * @author Nierui <nierui@creatorblue.com>\r\n * @version 1.0\r\n * @since 1.0\r\n */\r\n\r\n/**\r\n * 弹出层，这是一个实验性的功能，依赖于popups-layer.css样式表，小部分图标依赖bootstrap.\r\n * @todo 移除依赖\r\n * @class\r\n */\r\n\r\nclass popupsLayer {\r\n    /**\r\n     * 配置并生成弹出层父元素.\r\n     * @constructor\r\n     *\r\n     * @param {Object} layer - 弹出层的外层盒子配置信息，目前有以下参数\r\n     * @todo @param type - 指定弹出层的类型\r\n     *\r\n     * @param {String<'LEFT' | 'RIGHT' | 'TOP' | 'BOTTOM' | 'CENTER'>} [layer.position = 'CENTER'] - 指定弹出层的位置.\r\n     *\r\n     * @param {Object} layer.style - 样式配置信息，你可以在这个对象中传递自定义的样式，命名规范遵从HTML DOM Style对象，有以下默认配置参数\r\n     * @param {String} [title.style.background = #ffffff] - 背景颜色.\r\n     * @param {String} [layer.style.borderRadius = 5px] - 指定圆角大小.\r\n     * @param {String} [layer.style.maxWidth = none] - 指定盒子最大宽度.\r\n     *\r\n     * @param {Object} title - 对标题栏的配置信息，目前有以下参数\r\n     * @todo @param {Object} icon - 标题栏加入一个图标.\r\n     * @param {Boolean} [title.enable = true] - 指定是否需要标题栏.\r\n     * @param {Boolean} [title.draggable = true] - 指定标题栏是否可以拖拽移动(内容窗口也将跟随移动).\r\n     * @param {String} title.text - 标题栏文字.\r\n     * @param {String} title.template - 你可能需要更灵活的方式控制标题栏，可以自己传入一个HTML模板加入标题栏.\r\n     *\r\n     * @param {Object} title.btnGroup - 指定标题栏右侧的按钮组，以下参数仅为样式中提供预设的一些按钮，你可以自己在样式写入自己喜欢的\r\n     *                                      按钮样式，并将样式名加入配置对象，仅支持class类名，不支持id.\r\n     * @param {Boolean} [title.btnGroup.enable = true] - 是否开启右侧按钮.\r\n     * @param {Boolean} [title.btnGroup.close = true] - 关闭按钮.\r\n     * @todo @param {Boolean} title.btnGroup.maximize - 最大化按钮.\r\n     *\r\n     * @param {Object} title.style - 样式配置信息，你可以在这个对象中传递自定义的样式，命名规范遵从HTML DOM Style对象，有以下默认配置参数\r\n     * @param {String} [title.style.color = #666666] - 标题栏字体颜色.\r\n     * @param {String} [title.style.fontSize = 14px] - 标题栏字体大小.\r\n     * @param {String} [title.style.borderBottom = '.4px solid rgba(75, 97, 124, 0.53)'] - 标题的下边框样式，取值同border-bottom\r\n     *\r\n     * @param {String} {Object} content - 对内容区域的配置信息，目前有以下参数\r\n     * @param {String} content.text - 指定要在内容区域显示的文本.\r\n     * @param {String} content.template - 你可能需要更灵活的方式控制内容，自己传入一个HTML模板加入弹出层，它会在文本下方展示.\r\n     *\r\n     * @param {Object} content.icon - 传入一个图标显示在内容区域，目前有以下参数\r\n     * @param {String} content.icon.src - 图标地址.\r\n     * @param {String<'LEFT' | 'RIGHT'>} [content.icon.position = 'LEFT'] - 指定图标在弹出层的文本左边还是右边.\r\n     *\r\n     * @param {Object} content.btnGroup - 指定按钮\r\n     * @param {Object} content.btnGroup.* - 自定义命名，此命名将成为按钮id属性名.\r\n     * @param {Object} content.btnGroup.*.text - 按钮内容文本.\r\n     * @param {Function} content.btnGroup.*.fn - 指定按钮点击事件函数.\r\n     * @param {String<ok | cancel>} content.btnGroup.*.theme - 使用样式表预设的按钮主题，此参数为主题类名，你也可以依据id属性名事先\r\n     *                                                          在样式表预设主题，但是请注意，这个参数只支持class类名.\r\n     *\r\n     * @param {Object} content.style - 样式配置信息，你可以在这个对象中传递自定义的样式，命名规范遵从HTML DOM Style对象，有以下默认配置参数\r\n     * @param {String} [content.style.color = #666666] - 内容区域字体颜色.\r\n     * @param {String} [content.style.fontSize = 14px] - 内容区域字体大小\r\n     *\r\n     * @version 1.0\r\n     * @since 1.0\r\n     */\r\n    constructor({layer, title, content}) {\r\n        // 配置文件\r\n        const DEFAULT_CONFIG = {\r\n            layer: {\r\n                position: 'CENTER',\r\n                style: {\r\n                    background: '#ffffff',\r\n                    borderRadius: '5px',\r\n                    maxWidth: 'none'\r\n                }\r\n            },\r\n            title: {\r\n                enable: true,\r\n                draggable: true,\r\n                btnGroup: {\r\n                    enable: true,\r\n                    close: true\r\n                },\r\n                style: {\r\n                    color: '#666666',\r\n                    fontSize: '14px',\r\n                    borderBottom: '.4px solid rgba(75, 97, 124, 0.53)'\r\n                }\r\n            },\r\n            content: {\r\n                style: {\r\n                    color: '#666666',\r\n                    fontSize: '14px'\r\n                }\r\n            }\r\n        };\r\n\r\n        this.config = {};\r\n        this.config.layer = Object.assign(DEFAULT_CONFIG.layer, layer);\r\n        this.config.title = Object.assign(DEFAULT_CONFIG.title, title);\r\n        this.config.content = Object.assign(DEFAULT_CONFIG.content, content);\r\n\r\n        this.popupsLayer = document.createElement('div');\r\n        this.popupsLayer.classList.add('popups-layer');\r\n\r\n        this.createLayer();\r\n        if (this.config.title.enable)\r\n            this.createTitle();\r\n        this.createContent();\r\n        document.body.insertBefore(this.popupsLayer, document.body.firstChild);\r\n    }\r\n\r\n    createLayer() {\r\n        const _CONFIG_ = this.config.layer;\r\n        const _POSITION_ = {\r\n            'LEFT': 'left: 0',\r\n            'RIGHT': 'right: 0',\r\n            'BOTTOM': 'bottom: 0',\r\n            'CENTER': 'top: 50%; left: 50%; transform: translate(-50%, -50%);'\r\n        };\r\n\r\n        this.layer = document.createElement('div');\r\n        this.layer.classList.add('popups-layer-box');\r\n        this.layer.setAttribute('style', `${_POSITION_[_CONFIG_.position]}`);\r\n        for (let [key, value] of Object.entries(_CONFIG_.style)) {\r\n            this.layer.style[key] = value;\r\n        }\r\n        this.popupsLayer.appendChild(this.layer);\r\n    }\r\n\r\n    createTitle() {\r\n        const _CONFIG_ = this.config.title;\r\n        let title = document.createElement('div');\r\n        title.classList.add('popups-layer-title');\r\n        for (let [key, value] of Object.entries(_CONFIG_.style)) {\r\n            title.style[key] = value;\r\n        }\r\n        if (_CONFIG_.text)\r\n            title.innerText = _CONFIG_.text;\r\n        if (_CONFIG_.template) {\r\n            let temp = title.innerHTML;\r\n            title.innerHTML = temp + _CONFIG_.template;\r\n        }\r\n        if (_CONFIG_.btnGroup.enable) {\r\n            for (let [key, value] of Object.entries(_CONFIG_.style)) {\r\n                // 绑定函数\r\n                if (value) {\r\n                    let i = document.createElement('i');\r\n                    i.classList.add(key);\r\n                }\r\n            }\r\n        }\r\n        if (_CONFIG_.draggable) {\r\n            title.style.cursor = 'all-scroll';\r\n            // title.setAttribute('draggable', true);\r\n        }\r\n        this.layer.appendChild(title);\r\n    }\r\n\r\n    createContent() {\r\n        const _CONFIG_ = this.config.content;\r\n        let content = document.createElement('div');\r\n        content.classList.add('popups-layer-content');\r\n        for (let [key, value] of Object.entries(_CONFIG_.style)) {\r\n            content.style[key] = value;\r\n        }\r\n        let textBox = document.createElement('div');\r\n        textBox.classList.add('popups-layer-text');\r\n        if (_CONFIG_.icon) {\r\n            let img = document.createElement('img');\r\n            img.src = _CONFIG_.icon.src;\r\n            img.style.cssFloat = _CONFIG_.icon.position.toLowerCase();\r\n            textBox.appendChild(img);\r\n        }\r\n        if (_CONFIG_.text) {\r\n            let p = document.createElement('p');\r\n            p.innerText = _CONFIG_.text;\r\n            textBox.appendChild(p);\r\n        }\r\n        if (_CONFIG_.template) {\r\n            let temp = textBox.innerHTML;\r\n            textBox.innerHTML = temp + _CONFIG_.template;\r\n        }\r\n        content.appendChild(textBox);\r\n        if (_CONFIG_.btnGroup) {\r\n            let btnGroup = document.createElement('div');\r\n            btnGroup.classList.add('btn-box');\r\n            for (let [key, value] of Object.entries(_CONFIG_.btnGroup)) {\r\n                let btn = document.createElement('button');\r\n                btn.classList.add('btn');\r\n                btn.setAttribute('id', key);\r\n                if (value.text) {\r\n                    btn.innerText = value.text;\r\n                }\r\n                if (value.fn) {\r\n                    btn.addEventListener('click', value.fn);\r\n                }\r\n                if (value.theme) {\r\n                    btn.classList.add(value.theme);\r\n                }\r\n                btnGroup.appendChild(btn);\r\n            }\r\n            content.appendChild(btnGroup);\r\n        }\r\n        this.layer.appendChild(content);\r\n    }\r\n\r\n    dragstart(e) {\r\n        e.preventDefault();\r\n    }\r\n\r\n    close() {\r\n        document.body.removeChild(this.popupsLayer);\r\n    }\r\n}\r\n"],"file":"popupsLayer.js"}