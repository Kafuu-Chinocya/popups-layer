"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var r=[];var n=true;var a=false;var i=undefined;try{for(var l=e[Symbol.iterator](),o;!(n=(o=l.next()).done);n=true){r.push(o.value);if(t&&r.length===t)break}}catch(e){a=true;i=e}finally{try{if(!n&&l["return"]!=null)l["return"]()}finally{if(a)throw i}}return r}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){if(t)_defineProperties(e.prototype,t);if(r)_defineProperties(e,r);return e}var PopupsLayer=function(){function c(e){var t=e.layer,r=e.title,n=e.content,a=e.after,i=a===void 0?null:a;_classCallCheck(this,c);var l={layer:{position:"CENTER",style:{background:"#ffffff",borderRadius:"5px",maxWidth:"none"}},title:{enable:true,draggable:true,btnGroup:{enable:true,close:true},style:{color:"#666666",fontSize:"14px",borderBottom:".4px solid rgba(75, 97, 124, 0.53)"}},content:{style:{color:"#666666",fontSize:"14px"}}};this.config={};this.config.layer=Object.assign(l.layer,t);this.config.title=Object.assign(l.title,r);this.config.content=Object.assign(l.content,n);this.popupsLayer=document.createElement("div");this.popupsLayer.classList.add("popups-layer");this.createLayer();if(this.config.title.enable)this.createTitle();this.createContent();if(document.querySelectorAll(".popups-layer").length){var o=document.querySelectorAll(".popups-layer");var s=o[o.length-1].nextElementSibling;document.body.insertBefore(this.popupsLayer,s)}else{document.body.insertBefore(this.popupsLayer,document.body.firstElementChild)}if(i instanceof Function){i()}}_createClass(c,[{key:"createLayer",value:function e(){var t=this.config.layer;var r={LEFT:"left: 0",RIGHT:"right: 0",BOTTOM:"bottom: 0",CENTER:"top: 50%; left: 50%; transform: translate(-50%, -50%);"};this.layer=document.createElement("div");this.layer.classList.add("popups-layer-box");this.layer.setAttribute("style","".concat(r[t.position]));var n=Object.entries(t.style);for(var a=0;a<n.length;a++){var i=_slicedToArray(n[a],2),l=i[0],o=i[1];this.layer.style[l]=o}this.popupsLayer.appendChild(this.layer)}},{key:"createTitle",value:function e(){var t=this.config.title;var r=document.createElement("div");r.classList.add("popups-layer-title");var n=Object.entries(t.style);for(var a=0;a<n.length;a++){var i=_slicedToArray(n[a],2),l=i[0],o=i[1];r.style[l]=o}if(t.text)r.innerText=t.text;if(t.template){r.innerHTML+=t.template}if(t.btnGroup.enable){var s=this;var c=document.createElement("div");c.classList.add("popups-layer-btn-group");var d={close:function e(){var t=document.createElement("i");t.classList.add("iconfont");t.classList.add("icon-guanbi");c.appendChild(t);t.addEventListener("click",function(){s.close()})}};var u=Object.entries(t.btnGroup);for(var p=0;p<u.length;p++){var f=_slicedToArray(u[p],2),l=f[0],o=f[1];if(Object.is(l,"enable"))continue;if(o){d[l]()}}r.appendChild(c)}var y=Object.entries(t.style);for(var v=0;v<y.length;v++){var h=_slicedToArray(y[v],2),l=h[0],o=h[1];if(o){var b=document.createElement("i");b.classList.add(l)}}if(t.draggable){r.style.cursor="all-scroll"}this.layer.appendChild(r)}},{key:"createContent",value:function e(){var t=this.config.content;var r=document.createElement("div");r.classList.add("popups-layer-content");var n=Object.entries(t.style);for(var a=0;a<n.length;a++){var i=_slicedToArray(n[a],2),l=i[0],o=i[1];r.style[l]=o}var s=document.createElement("div");s.classList.add("popups-layer-text");if(t.icon){var c=document.createElement("img");c.src=t.icon.src;c.style.cssFloat=t.icon.position.toLowerCase();s.appendChild(c)}if(t.text){var d=document.createElement("p");d.innerText=t.text;s.appendChild(d)}if(t.template){var u=s.innerHTML;s.innerHTML=u+t.template}r.appendChild(s);if(t.btnGroup){var p=document.createElement("div");p.classList.add("btn-box");var f=Object.entries(t.btnGroup);for(var y=0;y<f.length;y++){var v=_slicedToArray(f[y],2),l=v[0],o=v[1];var h=document.createElement("button");h.classList.add("btn");h.setAttribute("id",l);if(o.text){h.innerText=o.text}if(o.fn){h.addEventListener("click",o.fn)}if(o.theme){h.classList.add(o.theme)}p.appendChild(h)}r.appendChild(p)}this.layer.appendChild(r)}},{key:"dragstart",value:function e(t){t.preventDefault()}},{key:"close",value:function e(){this.config=null;document.body.removeChild(this.popupsLayer)}}]);return c}();