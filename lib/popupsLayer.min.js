"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(!e)return;if(typeof e==="string")return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,t)}function _arrayLikeToArray(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}function _iterableToArrayLimit(e,t){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(e)))return;var r=[];var n=true;var a=false;var i=undefined;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done);n=true){r.push(l.value);if(t&&r.length===t)break}}catch(e){a=true;i=e}finally{try{if(!n&&o["return"]!=null)o["return"]()}finally{if(a)throw i}}return r}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){if(t)_defineProperties(e.prototype,t);if(r)_defineProperties(e,r);return e}var PopupsLayer=function(){function l(e){var t=e.layer,r=e.title,n=e.content,a=e.after,i=a===void 0?null:a;_classCallCheck(this,l);var o=function(){function c(e){var t=e.layer,r=e.title,n=e.content,a=e.after,i=a===void 0?null:a;_classCallCheck(this,c);var o={layer:{position:"CENTER",style:{background:"#ffffff",borderRadius:"5px",maxWidth:"none"}},title:{enable:true,draggable:true,btnGroup:{enable:true,close:true},style:{color:"#666666",fontSize:"14px",borderBottom:".4px solid rgba(75, 97, 124, 0.53)"}},content:{style:{color:"#666666",fontSize:"14px"}}};this.config=c.objectDeepCopy(o,{layer:t,title:r,content:n});this.popupsLayer=document.createElement("div");this.popupsLayer.classList.add("popups-layer");this.createLayer();if(this.config.title.enable)this.createTitle();this.createContent();if(document.querySelectorAll(".popups-layer").length){var l=document.querySelectorAll(".popups-layer");var s=l[l.length-1].nextElementSibling;document.body.insertBefore(this.popupsLayer,s)}else{document.body.insertBefore(this.popupsLayer,document.body.firstElementChild)}if(i instanceof Function)i()}_createClass(c,[{key:"createLayer",value:function e(){var t=this.config.layer;var r={LEFT:"left: 0",RIGHT:"right: 0",BOTTOM:"bottom: 0",CENTER:"top: 50%; left: 50%; transform: translate(-50%, -50%);"};this.layer=document.createElement("div");this.layer.classList.add("popups-layer-box");this.layer.setAttribute("style","".concat(r[t.position]));for(var n=0,a=Object.entries(t.style);n<a.length;n++){var i=_slicedToArray(a[n],2),o=i[0],l=i[1];this.layer.style[o]=l}this.popupsLayer.appendChild(this.layer)}},{key:"createTitle",value:function e(){var t=this.config.title;var r=document.createElement("div");r.classList.add("popups-layer-title");for(var n=0,a=Object.entries(t.style);n<a.length;n++){var i=_slicedToArray(a[n],2),o=i[0],l=i[1];r.style[o]=l}if(t.hasOwnProperty("text"))r.innerText=t.text;if(t.hasOwnProperty("template")){r.innerHTML+=t.template}if(t.btnGroup.enable){var s=this;var c=document.createElement("div");c.classList.add("popups-layer-btn-group");var u={close:function e(){var t=document.createElement("i");t.classList.add("iconfont");t.classList.add("icon-guanbi");c.appendChild(t);t.addEventListener("click",function(){s.close()})}};for(var p=0,f=Object.entries(t.btnGroup);p<f.length;p++){var d=_slicedToArray(f[p],2),y=d[0],v=d[1];if(Object.is(y,"enable"))continue;if(v){u[y]()}}r.appendChild(c)}for(var h=0,b=Object.entries(t.style);h<b.length;h++){var m=_slicedToArray(b[h],2),L=m[0],g=m[1];if(g){var C=document.createElement("i");C.classList.add(L)}}if(t.draggable)this.dragLayer(r);this.layer.appendChild(r)}},{key:"createContent",value:function e(){var t=this.config.content;var r=document.createElement("div");r.classList.add("popups-layer-content");for(var n=0,a=Object.entries(t.style);n<a.length;n++){var i=_slicedToArray(a[n],2),o=i[0],l=i[1];r.style[o]=l}var s=document.createElement("div");s.classList.add("popups-layer-text");if(t.hasOwnProperty("icon")){var c=document.createElement("img");c.src=t.icon.src;c.style.cssFloat=t.icon.position.toLowerCase();s.appendChild(c)}if(t.hasOwnProperty("text")){var u=document.createElement("p");u.innerText=t.text;s.appendChild(u)}if(t.hasOwnProperty("template")){var p=s.innerHTML;s.innerHTML=p+t.template}r.appendChild(s);if(t.hasOwnProperty("btnGroup")){var f=document.createElement("div");f.classList.add("btn-box");for(var d=0,y=Object.entries(t.btnGroup);d<y.length;d++){var v=_slicedToArray(y[d],2),h=v[0],b=v[1];var m=document.createElement("button");m.classList.add("btn");m.setAttribute("id",h);if(b.text){m.innerText=b.text}if(b.fn){m.addEventListener("click",b.fn)}if(b.theme){m.classList.add(b.theme)}f.appendChild(m)}r.appendChild(f)}this.layer.appendChild(r)}},{key:"dragLayer",value:function e(t){var r=this;var n=false;t.style.cursor="all-scroll";t.addEventListener("mousedown",function(e){e.preventDefault();n=true});this.popupsLayer.addEventListener("mouseup",function(e){e.preventDefault();n=false});this.popupsLayer.addEventListener("mousemove",function(e){e.preventDefault();if(n){r.layer.style.left="".concat(r.layer.offsetLeft+e.movementX,"px");r.layer.style.top="".concat(r.layer.offsetTop+e.movementY,"px")}})}},{key:"close",value:function e(){document.body.removeChild(this.popupsLayer)}}],[{key:"objectDeepCopy",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=Object.keys(t);if(n.length){for(var a=0;a<n.length;a++){if(!r.hasOwnProperty(n[a]))r[n[a]]={};if(Object.prototype.toString.call(t[n[a]])==="[object Object]")this.objectDeepCopy(t[n[a]],r[n[a]]);if(r[n[a]]===""||JSON.stringify(r[n[a]])!=="{}")continue;r[n[a]]=t[n[a]]}}return r}}]);return c}();this._ui=new o({layer:t,title:r,content:n,after:i})}_createClass(l,[{key:"close",value:function e(){this._ui.close()}},{key:"destroy",value:function e(){this._ui=null}}]);return l}();